<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>行为采集与指令生成插件</title>
  <style>
    body {
      width: 300px;
      padding: 10px;
      font-family: Arial, sans-serif;
    }
    h1 {
      font-size: 18px;
      color: #333;
    }
    button {
      margin-top: 10px;
      padding: 5px 10px;
      background-color: #4285f4;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      width: 100%;
      margin-bottom: 8px;
    }
    button:hover {
      background-color: #3367d6;
    }
    #instructionResult {
      margin-top: 10px;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      max-height: 150px;
      overflow-y: auto;
      display: none;
    }
    .loading {
      text-align: center;
      margin: 10px 0;
      display: none;
    }
    #actionContainer {
      margin-top: 10px;
      display: flex;
      gap: 8px;
    }
    .action-button {
      flex: 1;
      padding: 5px 10px;
      background-color: #34a853;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .action-button:hover {
      background-color: #2d9144;
    }
    #newTaskButton {
      background-color: #fbbc05;
      color: #333;
    }
    #newTaskButton:hover {
      background-color: #f0b400;
    }
    #userTaskInput {
      width: 100%;
      padding: 8px;
      margin-top: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      box-sizing: border-box;
    }
    .input-container {
      margin-top: 10px;
    }
    .input-label {
      font-size: 14px;
      color: #555;
      margin-bottom: 5px;
    }
  </style>
</head>
<body>
  <h1>行为采集与指令生成插件</h1>
  <p>当前状态：<span id="status">正在运行</span></p>
  
  <button id="captureAndGenerate">截屏并生成指令</button>
  <div class="loading" id="loadingIndicator">处理中...</div>

  <div class="input-container">
    <div class="input-label">选择场景：</div>
    <select id="sceneSelector" style="width: 100%; padding: 5px; margin-bottom: 10px;">
      <!-- 场景选项将通过 JavaScript 动态生成 -->
    </select>
  </div>
  
  <!-- 管理场景按钮 -->
  <button id="manageScenesButton" style="width: 100%; background-color: #fbbc05; color: #333;">管理场景</button>
  
  <!-- 管理场景视图 -->
<div id="sceneManagementView" style="display: none; margin-top: 10px;">
  <h2>管理场景</h2>
  <div id="sceneList" style="margin-bottom: 10px;">
    <!-- 场景列表将通过 JavaScript 动态生成 -->
  </div>
  <button id="addSceneButton" style="width: 100%; background-color: #34a853; color: white;">添加场景</button>
  <button id="backButton" style="width: 100%; background-color: #4285f4; color: white; margin-top: 10px;">返回</button>
</div>

<!-- 编辑场景视图 -->
<div id="sceneEditView" style="display: none; margin-top: 10px;">
  <h2>编辑场景</h2>
  <div class="input-container">
    <div class="input-label">场景名称：</div>
    <input id="editSceneName" type="text" style="width: 100%; padding: 5px; margin-bottom: 10px;" />
  </div>
  <div class="input-container">
    <div class="input-label">Prompt 内容：</div>
    <textarea id="editScenePrompt" rows="5" style="width: 100%; padding: 5px; resize: none;"></textarea>
  </div>
  <button id="deleteSceneButton" style="width: 100%; background-color: #d9534f; color: white; margin-top: 10px;">删除场景</button>
  <button id="saveSceneButton" style="width: 100%; background-color: #34a853; color: white; margin-top: 10px;">保存</button>
  <button id="cancelEditButton" style="width: 100%; background-color: #4285f4; color: white; margin-top: 10px;">取消</button>
</div>
  
  <div class="input-container">
    <div class="input-label">补充说明（可选）：</div>
    <textarea id="userTaskInput" placeholder="请输入您希望OWL执行的具体任务..." rows="3" style="resize: none; width: 100%;"></textarea>
  </div>
  
  <div class="input-container">
    <div class="input-label">生成的指令（可编辑）：</div>
    <textarea id="instructionResult" placeholder="指令将在这里显示..." rows="5" style="resize: none; width: 90%;"></textarea>
  </div>
  
  <div id="actionContainer"></div>
  
  <button id="newTaskButton" style="display: none;">开始新任务</button>
  <!-- <button id="clearData">清除数据</button> -->
  <!-- <button id="exportData">导出数据</button> -->

  <script src="popup.js"></script>
</body>
</html>
